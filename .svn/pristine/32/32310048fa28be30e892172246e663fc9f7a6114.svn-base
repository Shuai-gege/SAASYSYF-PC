{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-338a3497\"],{\"09f4\":function(e,t,r){\"use strict\";r.d(t,\"a\",(function(){return s})),Math.easeInOutQuad=function(e,t,r,n){return e/=n/2,e<1?r/2*e*e+t:(e--,-r/2*(e*(e-2)-1)+t)};var n=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function a(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function i(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function s(e,t,r){var s=i(),o=e-s,u=20,l=0;t=\"undefined\"===typeof t?500:t;var c=function e(){l+=u;var i=Math.easeInOutQuad(l,s,o,t);a(i),l<t?n(e):r&&\"function\"===typeof r&&r()};c()}},\"0f69\":function(e,t,r){\"use strict\";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r(\"div\",{staticClass:\"app-container\"},[r(\"div\",{staticStyle:{\"margin-top\":\"20px\",\"margin-bottom\":\"20px\"}},[r(\"el-row\",{attrs:{gutter:10}},[r(\"el-col\",{attrs:{span:4}},[r(\"el-input\",{attrs:{\"prefix-icon\":\"el-icon-search\",placeholder:\"请输入部门名称\",clearable:\"\"},on:{clear:e.clearSearchDept},model:{value:e.searchDeptName,callback:function(t){e.searchDeptName=t},expression:\"searchDeptName\"}})],1),e._v(\" \"),r(\"el-col\",{attrs:{span:4}},[r(\"el-input\",{attrs:{placeholder:\"账号\"},model:{value:e.listQuery.name,callback:function(t){e.$set(e.listQuery,\"name\",t)},expression:\"listQuery.name\"}})],1),e._v(\" \"),r(\"el-col\",{attrs:{span:4}},[r(\"el-input\",{attrs:{placeholder:\"真实姓名\"},model:{value:e.listQuery.vserName,callback:function(t){e.$set(e.listQuery,\"vserName\",t)},expression:\"listQuery.vserName\"}})],1),e._v(\" \"),r(\"el-col\",{attrs:{span:4}},[r(\"el-select\",{attrs:{placeholder:\"用户状态\",clearable:\"\"},model:{value:e.listQuery.state,callback:function(t){e.$set(e.listQuery,\"state\",t)},expression:\"listQuery.state\"}},e._l(e.stateOptions,(function(e){return r(\"el-option\",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(\" \"),r(\"el-col\",{attrs:{span:8}},[r(\"el-button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"/rest/user/list\"],expression:\"['/rest/user/list']\"}],staticClass:\"filter-item\",attrs:{type:\"primary\",icon:\"el-icon-search\"},on:{click:e.handleSearch}},[e._v(\"查找\")]),e._v(\" \"),r(\"el-button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"/rest/user/add\"],expression:\"['/rest/user/add']\"}],staticClass:\"filter-item\",staticStyle:{\"margin-left\":\"10px\"},attrs:{type:\"primary\"},on:{click:e.handleCreate}},[r(\"i\",{staticClass:\"el-icon-plus\"}),e._v(\"新增\\n          \")])],1)],1)],1),e._v(\" \"),r(\"div\",[r(\"el-row\",[r(\"el-col\",{attrs:{span:4}},[r(\"el-tree\",{ref:\"serchDeptTree\",staticClass:\"objectTree\",attrs:{data:e.departments,props:e.defaultProps,\"node-key\":\"id\",\"default-expand-all\":\"\",\"expand-on-click-node\":!1,\"filter-node-method\":e.filterNode},on:{\"node-click\":e.handleSearchDeptNode}})],1),e._v(\" \"),r(\"el-col\",{attrs:{span:20}},[r(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.listLoading,expression:\"listLoading\"}],key:e.tableKey,staticStyle:{width:\"100%\"},attrs:{data:e.list,height:\"450\",border:\"\"}},[r(\"el-table-column\",{attrs:{width:\"50\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[r(\"span\",[e._v(e._s(t.$index+(e.listQuery.page-1)*e.listQuery.limit+1))])]}}])}),e._v(\" \"),r(\"el-table-column\",{attrs:{prop:\"name\",label:\"账号\",width:\"100\"}}),e._v(\" \"),r(\"el-table-column\",{attrs:{prop:\"vserName\",label:\"真实姓名\",width:\"100\"}}),e._v(\" \"),r(\"el-table-column\",{attrs:{prop:\"mobile\",label:\"手机\",width:\"150\"}}),e._v(\" \"),r(\"el-table-column\",{attrs:{prop:\"email\",label:\"邮箱\",width:\"180\"}}),e._v(\" \"),r(\"el-table-column\",{attrs:{prop:\"deptName\",label:\"公司部门\",width:\"210\",formatter:e.formatDept}}),e._v(\" \"),r(\"el-table-column\",{attrs:{prop:\"roleName\",label:\"角色\",width:\"180\",formatter:e.formatRole}}),e._v(\" \"),r(\"el-table-column\",{attrs:{label:\"禁用/启用\",width:\"85\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[r(\"el-switch\",{attrs:{\"active-value\":1,\"inactive-value\":0},on:{change:function(r){return e.handleStateChange(t.row)}},model:{value:t.row.state,callback:function(r){e.$set(t.row,\"state\",r)},expression:\"scope.row.state\"}})]}}])}),e._v(\" \"),r(\"el-table-column\",{attrs:{label:\"操作\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[r(\"el-button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"/rest/user/update\"],expression:\"['/rest/user/update']\"}],attrs:{type:\"text\",size:\"small\"},on:{click:function(r){return e.handleEdit(t)}}},[e._v(\"编辑\")])]}}])})],1),e._v(\" \"),r(\"pagination\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.total>0,expression:\"total>0\"}],attrs:{total:e.total,page:e.listQuery.page,limit:e.listQuery.limit},on:{\"update:page\":function(t){return e.$set(e.listQuery,\"page\",t)},\"update:limit\":function(t){return e.$set(e.listQuery,\"limit\",t)},pagination:e.getList}})],1)],1)],1),e._v(\" \"),r(\"el-dialog\",{attrs:{visible:e.dialogVisible,title:\"edit\"===e.dialogType?\"编辑\":\"新增\"},on:{\"update:visible\":function(t){e.dialogVisible=t}}},[r(\"el-form\",{ref:\"form\",attrs:{model:e.user,rules:e.rules,\"label-width\":\"80px\",\"label-position\":\"right\"}},[r(\"el-form-item\",{attrs:{label:\"账号\",prop:\"name\"}},[r(\"el-input\",{attrs:{placeholder:\"手机号\"},model:{value:e.user.name,callback:function(t){e.$set(e.user,\"name\",t)},expression:\"user.name\"}})],1),e._v(\" \"),r(\"el-form-item\",{attrs:{label:\"密码\",prop:\"password\"}},[r(\"el-input\",{attrs:{placeholder:\"密码\"},model:{value:e.user.password,callback:function(t){e.$set(e.user,\"password\",t)},expression:\"user.password\"}})],1),e._v(\" \"),r(\"el-form-item\",{attrs:{label:\"真实姓名\",prop:\"vserName\"}},[r(\"el-input\",{attrs:{placeholder:\"真实姓名\"},model:{value:e.user.vserName,callback:function(t){e.$set(e.user,\"vserName\",t)},expression:\"user.vserName\"}})],1),e._v(\" \"),r(\"el-form-item\",{attrs:{label:\"角色\"}},[r(\"el-select\",{staticStyle:{width:\"100%\"},attrs:{multiple:\"\",placeholder:\"请选择\"},model:{value:e.user.roleIds,callback:function(t){e.$set(e.user,\"roleIds\",t)},expression:\"user.roleIds\"}},e._l(e.roles,(function(e){return r(\"el-option\",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),e._v(\" \"),r(\"el-form-item\",{attrs:{label:\"部门\",prop:\"deptid\"}},[r(\"treeselect\",{attrs:{options:e.departments,normalizer:e.normalizer,placeholder:\"选择部门\"},model:{value:e.user.deptid,callback:function(t){e.$set(e.user,\"deptid\",t)},expression:\"user.deptid\"}})],1),e._v(\" \"),r(\"el-form-item\",{attrs:{label:\"状态\",prop:\"state\"}},[r(\"el-radio-group\",{model:{value:e.user.state,callback:function(t){e.$set(e.user,\"state\",t)},expression:\"user.state\"}},e._l(e.stateOptions,(function(t){return r(\"el-radio\",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1),e._v(\" \"),r(\"el-form-item\",{attrs:{label:\"邮箱\"}},[r(\"el-input\",{attrs:{placeholder:\"邮箱\"},model:{value:e.user.email,callback:function(t){e.$set(e.user,\"email\",t)},expression:\"user.email\"}})],1)],1),e._v(\" \"),r(\"span\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[r(\"el-button\",{attrs:{type:\"danger\"},on:{click:function(t){e.dialogVisible=!1}}},[e._v(\"取消\")]),e._v(\" \"),r(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.confirmUser}},[e._v(\"确定\")])],1)],1)],1)},a=[],i=(r(\"7f7f\"),r(\"ac6a\"),r(\"96cf\"),r(\"3b8d\")),s=r(\"ca17\"),o=r.n(s),u=(r(\"542c\"),r(\"4381\")),l=r(\"b3f4\"),c=r(\"653d\"),d=r(\"fd0f\"),p=r(\"db93\"),m=r(\"ed08\"),f=r(\"333d\"),h=(r(\"814f\"),{uid:\"\",name:\"\",password:123456,vserName:\"\",mobile:\"\",state:1,email:\"\",deptid:void 0,jobid:void 0,jobName:\"\",deptName:\"\",roleIds:[],companyId:void 0}),b={name:\"User\",components:{Pagination:f[\"a\"],Treeselect:o.a},directives:{permission:u[\"a\"]},data:function(){return{tableKey:0,list:null,total:0,listLoading:!1,listQuery:{page:1,limit:10,vserName:\"\",name:\"\",mobile:\"\",deptid:void 0,state:void 0},searchDeptName:\"\",stateOptions:[{label:\"禁用\",value:0},{label:\"启用\",value:1}],user:Object.assign({},h),defaultProps:{children:\"childrens\",label:\"name\"},departments:[],roles:[],activeName:\"first\",dialogVisible:!1,dialogType:\"new\",rules:{name:[{required:!0,message:\"请输入账号\",trigger:\"blur\"},{min:2,max:20,message:\"长度在 2 到 20 个字符\",trigger:\"blur\"}],password:[{required:!0,message:\"请输入密码\",trigger:\"blur\"},{min:2,max:20,message:\"长度在 2 到 20 个字符\",trigger:\"blur\"}],vserName:[{required:!0,message:\"请输入用户名\",trigger:\"blur\"},{min:2,max:10,message:\"长度在 2 到 10 个字符\",trigger:\"blur\"}],deptid:[{required:!0,message:\"请选择部门\",trigger:\"change\"}],state:[{required:!0,message:\"请选择状态\",trigger:\"change\"}]}}},watch:{searchDeptName:function(e){this.$refs.serchDeptTree.filter(e)}},created:function(){},mounted:function(){this.getList(),this.getSubDepartments(),this.getJobs(),this.getRoles()},methods:{getList:function(){var e=Object(i[\"a\"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.listLoading=!0,e.prev=1,e.next=4,Object(l[\"h\"])(this.listQuery);case 4:t=e.sent,this.listLoading=!1,this.list=t.result.rows,this.total=t.result.records,e.next=13;break;case 10:e.prev=10,e.t0=e[\"catch\"](1),this.listLoading=!1;case 13:case\"end\":return e.stop()}}),e,this,[[1,10]])})));function t(){return e.apply(this,arguments)}return t}(),handleSearch:function(){this.getList()},formatDept:function(e,t){return e.deptName},formatRole:function(e,t){var r=[];return e.roles.forEach((function(e){r.push(e.name)})),r.join(\" , \")},handleStateChange:function(e){var t=this,r=1===e.state?\"启用\":\"禁用\";this.$confirm(\"确认要 [\"+r+\"] [\"+e.name+\"] 用户吗?\",\"警告\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(Object(i[\"a\"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(l[\"f\"])({uid:e.uid,state:e.state});case 2:t.$message({message:r+\"成功\",type:\"success\"});case 3:case\"end\":return n.stop()}}),n)})))).catch((function(t){console.error(t),e.state=0===e.state?1:0}))},getSubDepartments:function(){var e=Object(i[\"a\"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(c[\"f\"])();case 2:t=e.sent,r=t.result,this.diGuiTree(r),this.departments=r;case 6:case\"end\":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getSubCompanies:function(){var e=Object(i[\"a\"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(c[\"e\"])();case 2:t=e.sent,r=t.result,this.diGuiTree(r),this.companies=r;case 6:case\"end\":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getCompanyDept:function(){var e=Object(i[\"a\"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log(\"======  ==== \"+t.id),e.next=3,Object(c[\"g\"])(t.id);case 3:r=e.sent,n=r.result,this.diGuiTree(n),this.companyDepts=n;case 7:case\"end\":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getJobs:function(){var e=Object(i[\"a\"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(d[\"d\"])();case 2:t=e.sent,this.jobs=t.result;case 4:case\"end\":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getRoles:function(){var e=Object(i[\"a\"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(p[\"e\"])();case 2:t=e.sent,this.roles=t.result;case 4:case\"end\":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),clearSearchDept:function(){this.listQuery.deptid=void 0},diGuiTree:function(e){var t=this;e.forEach((function(e){\"\"===e.childrens||void 0===e.childrens||null===e.childrens?delete e.childrens:t.diGuiTree(e.childrens)}))},normalizer:function(e){return{id:e.id,label:e.name,children:e.childrens}},queryJobSearch:function(e,t){var r=this.jobs,n=e?r.filter(this.createJobFilter(e)):r;t(n)},createJobFilter:function(e){return function(t){return 0===t.name.toLowerCase().indexOf(e.toLowerCase())}},handleJobSelect:function(e){this.user.jobid=e.id,this.user.jobName=e.name},handleCreate:function(){this.dialogType=\"new\",this.activeName=\"first\",this.dialogVisible=!0,this.user=Object.assign({},h)},handleEdit:function(e){if(this.dialogType=\"edit\",this.activeName=\"first\",this.dialogVisible=!0,e.row.roleIds=[],this.user=Object(m[\"c\"])(e.row),this.user.roles){var t=this.user.roleIds;this.user.roles.forEach((function(e){t.push(e.id)}))}},confirmUser:function(){var e=Object(i[\"a\"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=\"edit\"===this.dialogType,!t){e.next=6;break}return e.next=4,Object(l[\"g\"])(this.user);case 4:e.next=8;break;case 6:return e.next=8,Object(l[\"a\"])(this.user);case 8:this.dialogVisible=!1,this.$message({showClose:!0,message:\"保存成功\",type:\"success\"}),this.getList();case 11:case\"end\":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleSearchDeptNode:function(e){this.isShowSelect=!1,this.listQuery.deptid=e.id,this.getList()},filterNode:function(e,t){return!e||-1!==t.name.indexOf(e)}}},v=b,g=r(\"2877\"),w=Object(g[\"a\"])(v,n,a,!1,null,null,null);t[\"default\"]=w.exports},4381:function(e,t,r){\"use strict\";r(\"ac4d\"),r(\"8a81\"),r(\"ac6a\");var n=r(\"4360\"),a={inserted:function(e,t,r){var a=t.value,i=n[\"a\"].getters&&n[\"a\"].getters.permissions;if(!(a&&a instanceof Array&&a.length>0&&i))throw new Error(\"need permissions! Like v-permission=\\\"['/rest/user/list']\\\"\");var s=!1,o=!0,u=!1,l=void 0;try{for(var c,d=i[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){var p=c.value;if(p.url===a[0]){s=!0;break}}}catch(m){u=!0,l=m}finally{try{o||null==d.return||d.return()}finally{if(u)throw l}}s||e.remove()}},i=function(e){e.directive(\"permission\",a)};window.Vue&&(window[\"permission\"]=a,Vue.use(i)),a.install=i;t[\"a\"]=a},\"653d\":function(e,t,r){\"use strict\";r.d(t,\"d\",(function(){return a})),r.d(t,\"f\",(function(){return i})),r.d(t,\"g\",(function(){return s})),r.d(t,\"e\",(function(){return o})),r.d(t,\"a\",(function(){return u})),r.d(t,\"b\",(function(){return l})),r.d(t,\"h\",(function(){return c})),r.d(t,\"c\",(function(){return d}));var n=r(\"b775\");function a(){return Object(n[\"a\"])({url:\"/rest/department/all\",method:\"get\"})}function i(){return Object(n[\"a\"])({url:\"/rest/department/subDept\",method:\"get\"})}function s(e){return Object(n[\"a\"])({url:\"/rest/department/subDeptByDeptId\",method:\"get\",params:{deptId:e}})}function o(){return Object(n[\"a\"])({url:\"/rest/department/subCompanyList\",method:\"get\"})}function u(e){return Object(n[\"a\"])({url:\"/rest/department/companyAdd\",method:\"post\",data:e})}function l(e){return Object(n[\"a\"])({url:\"/rest/department/topCompanyAdd\",method:\"post\",data:e})}function c(e){return Object(n[\"a\"])({url:\"/rest/department/update\",method:\"post\",data:e})}function d(e){return Object(n[\"a\"])({url:\"/rest/department/delete\",method:\"get\",params:{id:e}})}},\"814f\":function(e,t,r){\"use strict\";r.d(t,\"g\",(function(){return a})),r.d(t,\"f\",(function(){return i})),r.d(t,\"d\",(function(){return s})),r.d(t,\"e\",(function(){return o})),r.d(t,\"c\",(function(){return u})),r.d(t,\"b\",(function(){return l})),r.d(t,\"a\",(function(){return c}));var n=r(\"b775\");function a(e){return Object(n[\"a\"])({url:\"/rest/tbBuildingLocation/list\",method:\"post\",data:e})}function i(e){return Object(n[\"a\"])({url:\"/rest/tbBuildingLocation/update\",method:\"post\",data:e})}function s(e){return Object(n[\"a\"])({url:\"/rest/tbBuildingLocation/add\",method:\"post\",data:e})}function o(e){return Object(n[\"a\"])({url:\"/rest/tbBuildingLocation/delete\",method:\"post\",data:e})}function u(e){return Object(n[\"a\"])({url:\"/rest/tbBuildingLocation/getCompanyDept\",method:\"get\",params:{uid:e}})}function l(){return Object(n[\"a\"])({url:\"/rest/tbBuildingLocation/getCompanyBuildingLocation\",method:\"get\"})}function c(e){return Object(n[\"a\"])({url:\"/rest/tbBuildingLocation/getBuildingLocationFloor\",method:\"get\",params:{parentId:e}})}},db93:function(e,t,r){\"use strict\";r.d(t,\"d\",(function(){return a})),r.d(t,\"e\",(function(){return i})),r.d(t,\"a\",(function(){return s})),r.d(t,\"g\",(function(){return o})),r.d(t,\"b\",(function(){return u})),r.d(t,\"f\",(function(){return l})),r.d(t,\"c\",(function(){return c}));var n=r(\"b775\");function a(e){return Object(n[\"a\"])({url:\"/rest/role/list\",method:\"post\",data:e})}function i(){return Object(n[\"a\"])({url:\"/rest/role/all\",method:\"get\"})}function s(e){return Object(n[\"a\"])({url:\"/rest/role/add\",method:\"post\",data:e})}function o(e){return Object(n[\"a\"])({url:\"/rest/role/update\",method:\"post\",data:e})}function u(e){return Object(n[\"a\"])({url:\"/rest/role/delete\",method:\"get\",params:{id:e}})}function l(e){return Object(n[\"a\"])({url:\"/rest/role/saveDataScope\",method:\"post\",data:e})}function c(e){return Object(n[\"a\"])({url:\"/rest/role/queryDataScope\",method:\"get\",params:{id:e}})}},fd0f:function(e,t,r){\"use strict\";r.d(t,\"c\",(function(){return a})),r.d(t,\"d\",(function(){return i})),r.d(t,\"a\",(function(){return s})),r.d(t,\"e\",(function(){return o})),r.d(t,\"f\",(function(){return u})),r.d(t,\"b\",(function(){return l}));var n=r(\"b775\");function a(e){return Object(n[\"a\"])({url:\"/rest/job/list\",method:\"post\",data:e})}function i(){return Object(n[\"a\"])({url:\"/rest/job/all\",method:\"get\"})}function s(e){return Object(n[\"a\"])({url:\"/rest/job/add\",method:\"post\",data:e})}function o(e){return Object(n[\"a\"])({url:\"/rest/job/update\",method:\"post\",data:e})}function u(e){return Object(n[\"a\"])({url:\"/rest/job/updateState\",method:\"post\",data:e})}function l(e){return Object(n[\"a\"])({url:\"/rest/job/delete\",method:\"get\",params:{id:e}})}}}]);","extractedComments":[]}
{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-44c02e11\"],{\"09f4\":function(e,t,n){\"use strict\";n.d(t,\"a\",(function(){return o})),Math.easeInOutQuad=function(e,t,n,r){return e/=r/2,e<1?n/2*e*e+t:(e--,-n/2*(e*(e-2)-1)+t)};var r=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function i(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function a(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function o(e,t,n){var o=a(),l=e-o,s=20,c=0;t=\"undefined\"===typeof t?500:t;var u=function e(){c+=s;var a=Math.easeInOutQuad(c,o,l,t);i(a),c<t?r(e):n&&\"function\"===typeof n&&n()};u()}},4381:function(e,t,n){\"use strict\";n(\"ac4d\"),n(\"8a81\"),n(\"ac6a\");var r=n(\"4360\"),i={inserted:function(e,t,n){var i=t.value,a=r[\"a\"].getters&&r[\"a\"].getters.permissions;if(!(i&&i instanceof Array&&i.length>0&&a))throw new Error(\"need permissions! Like v-permission=\\\"['/rest/user/list']\\\"\");var o=!1,l=!0,s=!1,c=void 0;try{for(var u,d=a[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var p=u.value;if(p.url===i[0]){o=!0;break}}}catch(f){s=!0,c=f}finally{try{l||null==d.return||d.return()}finally{if(s)throw c}}o||e.remove()}},a=function(e){e.directive(\"permission\",i)};window.Vue&&(window[\"permission\"]=i,Vue.use(a)),i.install=a;t[\"a\"]=i},\"4e1d\":function(e,t,n){\"use strict\";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticClass:\"app-container\"},[n(\"div\",{staticStyle:{\"margin-top\":\"20px\",\"margin-bottom\":\"20px\"}},[n(\"el-row\",{attrs:{gutter:20}},[n(\"el-col\",{attrs:{span:4}},[n(\"el-input\",{attrs:{placeholder:\"名称\"},model:{value:e.listQuery.name,callback:function(t){e.$set(e.listQuery,\"name\",t)},expression:\"listQuery.name\"}})],1),e._v(\" \"),n(\"el-col\",{attrs:{span:4}},[n(\"el-select\",{attrs:{placeholder:\"建筑\",clearable:\"\"},on:{change:e.getFloors},model:{value:e.listQuery.build,callback:function(t){e.$set(e.listQuery,\"build\",t)},expression:\"listQuery.build\"}},e._l(e.buildings,(function(e){return n(\"el-option\",{key:e.id,attrs:{label:e.locationName,value:e.id}})})),1)],1),e._v(\" \"),n(\"el-col\",{attrs:{span:4}},[n(\"el-select\",{attrs:{placeholder:\"楼层\",clearable:\"\"},model:{value:e.listQuery.floor,callback:function(t){e.$set(e.listQuery,\"floor\",t)},expression:\"listQuery.floor\"}},e._l(e.floors,(function(e){return n(\"el-option\",{key:e.id,attrs:{label:e.locationName,value:e.id}})})),1)],1),e._v(\" \"),n(\"el-col\",{attrs:{span:8}},[n(\"el-button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"/rest/deviceInfo/list\"],expression:\"['/rest/deviceInfo/list']\"}],staticClass:\"filter-item\",attrs:{type:\"primary\",icon:\"el-icon-search\"},on:{click:e.handleSearch}},[e._v(\"查找\")]),e._v(\" \"),n(\"el-button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"/rest/deviceInfo/add\"],expression:\"['/rest/deviceInfo/add']\"}],staticClass:\"filter-item\",staticStyle:{\"margin-left\":\"10px\"},attrs:{type:\"primary\"},on:{click:e.handleCreate}},[n(\"i\",{staticClass:\"el-icon-plus\"}),e._v(\"新增设备\\n          \")]),e._v(\" \"),n(\"el-button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"/rest/deviceInfo/exportQR\"],expression:\"['/rest/deviceInfo/exportQR']\"}],staticClass:\"filter-item\",staticStyle:{\"margin-left\":\"10px\"},attrs:{type:\"primary\"},on:{click:e.handleExportQR}},[e._v(\"导出二维码\\n          \")])],1)],1)],1),e._v(\" \"),n(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.listLoading,expression:\"listLoading\"}],key:e.tableKey,staticStyle:{width:\"100%\"},attrs:{data:e.list,border:\"\",height:\"450\"}},[n(\"el-table-column\",{attrs:{width:\"50\",label:\"序号\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[n(\"span\",[e._v(e._s(t.$index+(e.listQuery.page-1)*e.listQuery.limit+1))])]}}])}),e._v(\" \"),n(\"el-table-column\",{attrs:{prop:\"name\",label:\"设备名称\"}}),e._v(\" \"),n(\"el-table-column\",{attrs:{prop:\"typeName\",label:\"类型\",formatter:e.formatType}}),e._v(\" \"),n(\"el-table-column\",{attrs:{prop:\"brandName\",label:\"品牌\",formatter:e.formatBrand}}),e._v(\" \"),n(\"el-table-column\",{attrs:{prop:\"deviceModel\",label:\"型号\",formatter:e.formatModel}}),e._v(\" \"),n(\"el-table-column\",{attrs:{prop:\"address\",label:\"地址\",formatter:e.formatAddress}}),e._v(\" \"),n(\"el-table-column\",{attrs:{prop:\"putTime\",label:\"投放日期\"}}),e._v(\" \"),n(\"el-table-column\",{attrs:{prop:\"remark\",label:\"备注\"}}),e._v(\" \"),n(\"el-table-column\",{attrs:{prop:\"rqUrl\",label:\"二维码\"},scopedSlots:e._u([{key:\"default\",fn:function(e){return[n(\"el-image\",{staticStyle:{width:\"100px\",height:\"100px\"},attrs:{src:e.row.qrUrl,\"preview-src-list\":[e.row.qrUrl]}})]}}])}),e._v(\" \"),n(\"el-table-column\",{attrs:{prop:\"imgUrl\",label:\"图片\"},scopedSlots:e._u([{key:\"default\",fn:function(e){return[n(\"el-image\",{staticStyle:{width:\"100px\",height:\"100px\"},attrs:{src:e.row.imgUrl,\"preview-src-list\":[e.row.imgUrl]}})]}}])}),e._v(\" \"),n(\"el-table-column\",{attrs:{label:\"操作\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[n(\"el-button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"/rest/deviceInfo/update\"],expression:\"['/rest/deviceInfo/update']\"}],attrs:{type:\"text\",size:\"small\"},on:{click:function(n){return e.handleEdit(t)}}},[e._v(\"编辑\")]),e._v(\" \"),n(\"el-button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"/rest/deviceInfo/delete\"],expression:\"['/rest/deviceInfo/delete']\"}],attrs:{type:\"text\",size:\"small\"},on:{click:function(n){return e.handleDelete(t)}}},[e._v(\"删除\")])]}}])})],1),e._v(\" \"),n(\"pagination\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.total>0,expression:\"total>0\"}],attrs:{total:e.total,page:e.listQuery.page,limit:e.listQuery.limit},on:{\"update:page\":function(t){return e.$set(e.listQuery,\"page\",t)},\"update:limit\":function(t){return e.$set(e.listQuery,\"limit\",t)},pagination:e.getList}}),e._v(\" \"),n(\"el-dialog\",{attrs:{visible:e.dialogVisible,title:\"edit\"===e.dialogType?\"编辑\":\"新增\"},on:{\"update:visible\":function(t){e.dialogVisible=t}}},[n(\"el-form\",{ref:\"form\",attrs:{model:e.deviceInfo,rules:e.rules,\"label-position\":\"right\",\"label-width\":\"80px\"}},[n(\"el-form-item\",{attrs:{label:\"设备名称\",prop:\"name\"}},[n(\"el-input\",{attrs:{placeholder:\"岗位名\"},model:{value:e.deviceInfo.name,callback:function(t){e.$set(e.deviceInfo,\"name\",t)},expression:\"deviceInfo.name\"}})],1),e._v(\" \"),n(\"el-form-item\",{attrs:{label:\"类型\",prop:\"type\"}},[n(\"el-select\",{attrs:{filterable:\"\"},model:{value:e.deviceInfo.type,callback:function(t){e.$set(e.deviceInfo,\"type\",t)},expression:\"deviceInfo.type\"}},e._l(e.deviceTypes,(function(e){return n(\"el-option\",{key:e.data_key,attrs:{label:e.data_value,value:e.data_key}})})),1)],1),e._v(\" \"),n(\"el-form-item\",{attrs:{label:\"品牌\",prop:\"brand\"}},[n(\"el-select\",{attrs:{filterable:\"\"},model:{value:e.deviceInfo.brand,callback:function(t){e.$set(e.deviceInfo,\"brand\",t)},expression:\"deviceInfo.brand\"}},e._l(e.deviceBrands,(function(e){return n(\"el-option\",{key:e.data_key,attrs:{label:e.data_value,value:e.data_key}})})),1)],1),e._v(\" \"),n(\"el-form-item\",{attrs:{label:\"型号\",prop:\"model\"}},[n(\"el-select\",{attrs:{filterable:\"\"},model:{value:e.deviceInfo.model,callback:function(t){e.$set(e.deviceInfo,\"model\",t)},expression:\"deviceInfo.model\"}},e._l(e.deviceModels,(function(e){return n(\"el-option\",{key:e.data_key,attrs:{label:e.data_value,value:e.data_key}})})),1)],1),e._v(\" \"),n(\"el-form-item\",{attrs:{label:\"位置\",prop:\"model\"}},[n(\"el-select\",{attrs:{placeholder:\"建筑\",clearable:\"\"},on:{change:e.getFloors},model:{value:e.deviceInfo.building,callback:function(t){e.$set(e.deviceInfo,\"building\",t)},expression:\"deviceInfo.building\"}},e._l(e.buildings,(function(e){return n(\"el-option\",{key:e.id,attrs:{label:e.locationName,value:e.id}})})),1),e._v(\" \"),n(\"el-select\",{attrs:{placeholder:\"楼层\",clearable:\"\"},model:{value:e.deviceInfo.floor,callback:function(t){e.$set(e.deviceInfo,\"floor\",t)},expression:\"deviceInfo.floor\"}},e._l(e.floors,(function(e){return n(\"el-option\",{key:e.id,attrs:{label:e.locationName,value:e.id}})})),1)],1),e._v(\" \"),n(\"el-form-item\",{attrs:{label:\"投用时间\",prop:\"putTime\"}},[n(\"el-date-picker\",{attrs:{type:\"date\",placeholder:\"选择日期\"},model:{value:e.deviceInfo.putTime,callback:function(t){e.$set(e.deviceInfo,\"putTime\",t)},expression:\"deviceInfo.putTime\"}})],1),e._v(\" \"),n(\"el-form-item\",{attrs:{label:\"备注描述\",prop:\"remark\"}},[n(\"el-input\",{attrs:{type:\"textarea\",placeholder:\"请输入内容\"},model:{value:e.deviceInfo.remark,callback:function(t){e.$set(e.deviceInfo,\"remark\",t)},expression:\"deviceInfo.remark\"}})],1),e._v(\" \"),n(\"el-form-item\",{attrs:{label:\"图片\"}},[n(\"el-upload\",{attrs:{action:e.uploadPath,\"list-type\":\"picture-card\",limit:1,\"on-success\":e.handlePictureSuccess}},[n(\"i\",{staticClass:\"el-icon-plus\"})])],1)],1),e._v(\" \"),n(\"div\",{staticStyle:{\"text-align\":\"right\"}},[n(\"el-button\",{attrs:{type:\"danger\"},on:{click:function(t){e.dialogVisible=!1}}},[e._v(\"取消\")]),e._v(\" \"),n(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.confirmDeviceInfo}},[e._v(\"确定\")])],1)],1)],1)},i=[],a=(n(\"96cf\"),n(\"3b8d\")),o=n(\"4381\"),l=n(\"7be3\"),s=n(\"fbcf\"),c=n(\"814f\"),u=n(\"333d\"),d=n(\"ed08\"),p={id:void 0,name:\"\",type:void 0,brand:void 0,model:void 0,building:void 0,floor:void 0,putTime:void 0,remark:\"\",imgUrl:\"\"},f={name:\"DeviceInfo\",components:{Pagination:u[\"a\"]},directives:{permission:o[\"a\"]},data:function(){return{tableKey:0,list:null,total:0,listLoading:!1,listQuery:{page:1,limit:10,name:\"\"},deviceInfo:Object.assign({},p),dialogVisible:!1,dialogType:\"new\",deviceTypes:null,deviceBrands:null,deviceModels:null,buildings:null,floors:null,dialogImageUrl:\"\",dialogImageVisible:!1,uploadPath:\"http://47.100.240.228:8281/public/rest/img/upload\",baseUrl:\"http://47.100.240.228:8281\",rules:{name:[{required:!0,message:\"请输入岗位名\",trigger:\"blur\"},{min:2,max:15,message:\"长度在 2 到 15 个字符\",trigger:\"blur\"}],state:[{required:!0,message:\"请选择状态\",trigger:\"change\"}]}}},created:function(){this.getList(),this.getDeviceTypes(),this.getDeviceBrands(),this.getDeviceModels(),this.getBuildings()},methods:{getList:function(){var e=Object(a[\"a\"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.listLoading=!0,e.prev=1,e.next=4,Object(l[\"e\"])(this.listQuery);case 4:t=e.sent,this.listLoading=!1,this.list=t.result.rows,this.total=t.result.records,e.next=13;break;case 10:e.prev=10,e.t0=e[\"catch\"](1),this.listLoading=!1;case 13:case\"end\":return e.stop()}}),e,this,[[1,10]])})));function t(){return e.apply(this,arguments)}return t}(),getDeviceTypes:function(){var e=Object(a[\"a\"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.listLoading=!0,e.prev=1,e.next=4,Object(s[\"c\"])(\"device_type\");case 4:t=e.sent,this.listLoading=!1,this.deviceTypes=t.result,e.next=12;break;case 9:e.prev=9,e.t0=e[\"catch\"](1),this.listLoading=!1;case 12:case\"end\":return e.stop()}}),e,this,[[1,9]])})));function t(){return e.apply(this,arguments)}return t}(),getDeviceBrands:function(){var e=Object(a[\"a\"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s[\"c\"])(\"device_brand\");case 2:t=e.sent,n=t.result,this.deviceBrands=n;case 5:case\"end\":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getDeviceModels:function(){var e=Object(a[\"a\"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.listLoading=!0,e.prev=1,e.next=4,Object(s[\"c\"])(\"device_model\");case 4:t=e.sent,this.listLoading=!1,this.deviceModels=t.result,e.next=12;break;case 9:e.prev=9,e.t0=e[\"catch\"](1),this.listLoading=!1;case 12:case\"end\":return e.stop()}}),e,this,[[1,9]])})));function t(){return e.apply(this,arguments)}return t}(),getBuildings:function(){var e=Object(a[\"a\"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.listLoading=!0,e.prev=1,e.next=4,Object(c[\"b\"])();case 4:t=e.sent,this.listLoading=!1,this.buildings=t.result,e.next=12;break;case 9:e.prev=9,e.t0=e[\"catch\"](1),this.listLoading=!1;case 12:case\"end\":return e.stop()}}),e,this,[[1,9]])})));function t(){return e.apply(this,arguments)}return t}(),getFloors:function(){var e=Object(a[\"a\"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.listLoading=!0,e.prev=1,e.next=4,Object(c[\"a\"])(t);case 4:n=e.sent,this.listLoading=!1,this.floors=n.result,e.next=12;break;case 9:e.prev=9,e.t0=e[\"catch\"](1),this.listLoading=!1;case 12:case\"end\":return e.stop()}}),e,this,[[1,9]])})));function t(t){return e.apply(this,arguments)}return t}(),handleSearch:function(){this.getList()},handlePictureSuccess:function(e,t,n){this.deviceInfo.imgUrl=this.baseUrl+\"/public/rest/img/\"+e.result},handlePictureRemove:function(e,t){console.log(e,t)},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogImageVisibleVisible=!0},formatType:function(e,t){return e.typeName},formatBrand:function(e,t){return e.brandName},formatModel:function(e,t){return e.modelName},formatAddress:function(e,t){return e.buildingName+\"-\"+e.floorName},handleCreate:function(){this.dialogType=\"new\",this.dialogVisible=!0,this.deviceInfo=Object.assign({},p)},handleEdit:function(e){this.dialogType=\"edit\",this.dialogVisible=!0,this.checkStrictly=!0,this.deviceInfo=Object(d[\"c\"])(e.row)},handleExportQR:function(){var e=Object(a[\"a\"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(l[\"f\"])(this.listQuery);case 2:t=e.sent,window.location.href=this.baseUrl+\"/public/rest/qrZip/\"+t.result;case 4:case\"end\":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),confirmDeviceInfo:function(){var e=Object(a[\"a\"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=\"edit\"===this.dialogType,!t){e.next=6;break}return e.next=4,Object(l[\"g\"])(this.deviceInfo);case 4:e.next=8;break;case 6:return e.next=8,Object(l[\"a\"])(this.deviceInfo);case 8:this.dialogVisible=!1,this.$message({showClose:!0,message:\"保存成功\",type:\"success\"}),this.getList();case 11:case\"end\":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleDelete:function(e){var t=this,n=e.row;this.$confirm(\"确认删除?\",\"警告\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(Object(a[\"a\"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(l[\"b\"])(n.id);case 2:t.$message({showClose:!0,message:\"删除成功\",type:\"success\"}),t.getList();case 4:case\"end\":return e.stop()}}),e)})))).catch((function(e){console.error(e)}))}}},m=f,v=n(\"2877\"),b=Object(v[\"a\"])(m,r,i,!1,null,null,null);t[\"default\"]=b.exports},\"7be3\":function(e,t,n){\"use strict\";n.d(t,\"e\",(function(){return i})),n.d(t,\"f\",(function(){return a})),n.d(t,\"a\",(function(){return o})),n.d(t,\"g\",(function(){return l})),n.d(t,\"b\",(function(){return s})),n.d(t,\"d\",(function(){return c})),n.d(t,\"c\",(function(){return u}));var r=n(\"b775\");function i(e){return Object(r[\"a\"])({url:\"/rest/deviceInfo/list\",method:\"post\",data:e})}function a(e){return Object(r[\"a\"])({url:\"/rest/deviceInfo/exportQR\",method:\"post\",data:e})}function o(e){return Object(r[\"a\"])({url:\"/rest/deviceInfo/add\",method:\"post\",data:e})}function l(e){return Object(r[\"a\"])({url:\"/rest/deviceInfo/update\",method:\"post\",data:e})}function s(e){return Object(r[\"a\"])({url:\"/rest/deviceInfo/delete\",method:\"get\",params:{id:e}})}function c(e){return Object(r[\"a\"])({url:\"/rest/deviceCheck/list\",method:\"post\",data:e})}function u(e){return Object(r[\"a\"])({url:\"/rest/deviceCheckDetail/list\",method:\"post\",data:e})}},\"814f\":function(e,t,n){\"use strict\";n.d(t,\"g\",(function(){return i})),n.d(t,\"f\",(function(){return a})),n.d(t,\"d\",(function(){return o})),n.d(t,\"e\",(function(){return l})),n.d(t,\"c\",(function(){return s})),n.d(t,\"b\",(function(){return c})),n.d(t,\"a\",(function(){return u}));var r=n(\"b775\");function i(e){return Object(r[\"a\"])({url:\"/rest/tbBuildingLocation/list\",method:\"post\",data:e})}function a(e){return Object(r[\"a\"])({url:\"/rest/tbBuildingLocation/update\",method:\"post\",data:e})}function o(e){return Object(r[\"a\"])({url:\"/rest/tbBuildingLocation/add\",method:\"post\",data:e})}function l(e){return Object(r[\"a\"])({url:\"/rest/tbBuildingLocation/delete\",method:\"post\",data:e})}function s(e){return Object(r[\"a\"])({url:\"/rest/tbBuildingLocation/getCompanyDept\",method:\"get\",params:{uid:e}})}function c(){return Object(r[\"a\"])({url:\"/rest/tbBuildingLocation/getCompanyBuildingLocation\",method:\"get\"})}function u(e){return Object(r[\"a\"])({url:\"/rest/tbBuildingLocation/getBuildingLocationFloor\",method:\"get\",params:{parentId:e}})}},fbcf:function(e,t,n){\"use strict\";n.d(t,\"d\",(function(){return i})),n.d(t,\"c\",(function(){return a})),n.d(t,\"a\",(function(){return o})),n.d(t,\"e\",(function(){return l})),n.d(t,\"b\",(function(){return s}));var r=n(\"b775\");function i(e){return Object(r[\"a\"])({url:\"/rest/dict/list\",method:\"post\",data:e})}function a(e){return Object(r[\"a\"])({url:\"/rest/dict/info\",method:\"get\",params:{type:e}})}function o(e){return Object(r[\"a\"])({url:\"/rest/dict/add\",method:\"post\",data:e})}function l(e){return Object(r[\"a\"])({url:\"/rest/dict/update\",method:\"post\",data:e})}function s(e){return Object(r[\"a\"])({url:\"/rest/dict/delete\",method:\"get\",params:{id:e}})}}}]);","extractedComments":[]}
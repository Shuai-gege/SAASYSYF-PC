{"remainingRequest":"D:\\ysyf\\iguard-vue01\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\ysyf\\iguard-vue01\\src\\views\\iguard\\device\\deviceCheck.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\ysyf\\iguard-vue01\\src\\views\\iguard\\device\\deviceCheck.vue","mtime":1586084705000},{"path":"D:\\ysyf\\iguard-vue01\\node_modules\\babel-loader\\lib\\index.js","mtime":1586085013966},{"path":"D:\\ysyf\\iguard-vue01\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1586085021683},{"path":"D:\\ysyf\\iguard-vue01\\node_modules\\vue-loader\\lib\\index.js","mtime":1586085255129}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport permission from '@/directive/permission/index.js' // 权限判断指令\nimport {\n  deviceCheckList,\n  deviceCheckDetailRestList,\n} from '@/api/iguard/device/device'\n\nimport Pagination from '@/components/Pagination' // Secondary package based on el-pagination\nimport { deepClone } from '@/utils'\n\nexport default {\n  name: 'DeviceCheckInfo',\n  components: { Pagination },\n  directives: { permission },\n  data() {\n    return {\n      tableKey: 0,\n      unCheckTableKey:1,\n      checkTableKey:2,\n      list: null,\n      unCheckList:null,\n      checkList:null,\n      total: 0,\n      assignerList:null,\n      checkStatusList:[{\"id\":\"0\", \"title\":\"未完成\"},{\"id\":\"1\", \"title\":\"已完成\"}],\n      listLoading: false,\n      listQuery: {\n        page: 1,\n        limit: 10,\n        name: '',\n        checkTime:undefined,\n      },\n      dialogVisible: false\n    }\n  },\n  created() {\n    this.getList();\n  },\n\n  methods: {\n    async getList() {\n      this.listLoading = true;\n      try {\n        const res = await deviceCheckList(this.listQuery);\n        this.listLoading = false;\n        this.list = res.result.rows;\n        this.total = res.result.records\n      } catch (e) {\n        this.listLoading = false\n      }\n    },\n\n    formatCheckTime(row, column){\n      return row.startTime + '-' + row.endTime;\n    },\n\n    formatCheckStatus(row, column){\n      if (row.checkStatus === 1){\n        return \"已完成\";\n\n      }else {\n        return \"未完成\";\n      }\n    },\n\n    formatDeviceNum(row, column){\n      return row.normalDeviceNum + \"/\" + row.deviceNum;\n    },\n\n\n    formatAddress(row, column){\n      return row.buildingName + '-' + row.floorName;\n    },\n\n    formatDeviceStatus(row, column){\n      if (row.deviceStatus === 1){\n        return \"正常\";\n\n      }else {\n        return \"异常\";\n      }\n    },\n\n    async infoDetail(scope) {\n      this.dialogVisible = true;\n\n      this.listLoading = true;\n      try {\n\n        const unCheckData = {\n          \"deviceCheckId\":scope.row.id,\n          \"checkStatus\":\"0\",\n        };\n\n        const unCheckRes = await deviceCheckDetailRestList(unCheckData);\n        this.listLoading = false;\n        this.unCheckList = unCheckRes.result.rows;\n\n        const checkData = {\n          \"deviceCheckId\": scope.row.id,\n          \"checkStatus\": \"1\",\n        };\n\n        const checkRes = await deviceCheckDetailRestList(checkData);\n        this.listLoading = false;\n        this.checkList = checkRes.result.rows;\n      } catch (e) {\n        this.listLoading = false\n      }\n\n    },\n\n    handleSearch() {\n      this.getList()\n    },\n\n  }\n}\n",null]}
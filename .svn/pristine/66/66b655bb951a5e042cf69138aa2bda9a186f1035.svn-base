{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-0f652b0f\"],{\"2c7d\":function(e,t,i){\"use strict\";var s=i(\"d97c\"),n=i.n(s);n.a},\"2f88\":function(e,t,i){\"use strict\";var s=i(\"5c99\"),n=i.n(s);n.a},4381:function(e,t,i){\"use strict\";i(\"ac4d\"),i(\"8a81\"),i(\"ac6a\");var s=i(\"4360\"),n={inserted:function(e,t,i){var n=t.value,r=s[\"a\"].getters&&s[\"a\"].getters.permissions;if(!(n&&n instanceof Array&&n.length>0&&r))throw new Error(\"need permissions! Like v-permission=\\\"['/rest/user/list']\\\"\");var o=!1,a=!0,l=!1,c=void 0;try{for(var p,m=r[Symbol.iterator]();!(a=(p=m.next()).done);a=!0){var u=p.value;if(u.url===n[0]){o=!0;break}}}catch(d){l=!0,c=d}finally{try{a||null==m.return||m.return()}finally{if(l)throw c}}o||e.remove()}},r=function(e){e.directive(\"permission\",n)};window.Vue&&(window[\"permission\"]=n,Vue.use(r)),n.install=r;t[\"a\"]=n},\"5c99\":function(e,t,i){},b9e5:function(e,t,i){\"use strict\";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"div\",{staticClass:\"app-container\"},[i(\"div\",{staticStyle:{\"margin-top\":\"20px\",\"max-width\":\"600px\",\"margin-left\":\"80px\"}},[i(\"el-row\",{attrs:{gutter:20}},[i(\"el-col\",{attrs:{span:20}},[i(\"el-input\",{attrs:{placeholder:\"输入关键字进行过滤\",clearable:\"\"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:\"filterText\"}})],1),e._v(\" \"),i(\"el-col\",{attrs:{span:4}},[i(\"el-button\",{staticClass:\"filter-item\",attrs:{type:\"primary\"},on:{click:function(){return e.handleCreate()}}},[i(\"i\",{staticClass:\"el-icon-plus\"}),e._v(\" 添加\\n        \")])],1)],1),e._v(\" \"),i(\"el-row\",{staticStyle:{\"padding-top\":\"20px\"}},[i(\"el-col\",[i(\"el-tree\",{ref:\"tree\",staticClass:\"permission-tree\",attrs:{data:e.permissions,props:e.defaultProps,\"node-key\":\"id\",\"default-expand-all\":\"\",\"expand-on-click-node\":!1,\"filter-node-method\":e.filterNode},scopedSlots:e._u([{key:\"default\",fn:function(t){var s=t.node,n=t.data;return i(\"span\",{staticClass:\"custom-tree-node\"},[i(\"span\",[e._v(e._s(s.label))]),e._v(\" \"),i(\"span\",[i(\"el-button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"/rest/permission/add\"],expression:\"['/rest/permission/add']\"}],attrs:{type:\"text\",size:\"mini\"},on:{click:function(){return e.handleCreate(n)}}},[e._v(\"添加子项\")]),e._v(\" \"),i(\"el-button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"/rest/permission/update\"],expression:\"['/rest/permission/update']\"}],attrs:{type:\"text\",size:\"mini\"},on:{click:function(){return e.handleEdit(s,n)}}},[e._v(\"编辑\")]),e._v(\" \"),i(\"el-button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"/rest/permission/delete\"],expression:\"['/rest/permission/delete']\"}],attrs:{type:\"text\",size:\"mini\"},on:{click:function(){return e.handleDelete(n)}}},[e._v(\"删除\")])],1)])}}])})],1)],1)],1),e._v(\" \"),i(\"el-dialog\",{attrs:{visible:e.dialogVisible,title:\"edit\"===e.dialogType?\"编辑\":\"新增\",width:\"600px\"},on:{\"update:visible\":function(t){e.dialogVisible=t}}},[i(\"el-form\",{ref:\"form\",attrs:{inline:!0,rules:e.rules,size:\"small\",\"label-width\":\"80px\"}},[i(\"el-form-item\",{attrs:{label:\"权限类型\"}},[i(\"el-radio-group\",{staticStyle:{width:\"178px\"},attrs:{size:\"mini\"},model:{value:e.permission.types,callback:function(t){e.$set(e.permission,\"types\",t)},expression:\"permission.types\"}},[i(\"el-radio-button\",{attrs:{label:\"0\"}},[e._v(\"目录\")]),e._v(\" \"),i(\"el-radio-button\",{attrs:{label:\"1\"}},[e._v(\"菜单\")]),e._v(\" \"),i(\"el-radio-button\",{attrs:{label:\"2\"}},[e._v(\"按钮\")])],1)],1),e._v(\" \"),i(\"el-form-item\",{directives:[{name:\"show\",rawName:\"v-show\",value:\"2\"!==e.permission.types.toString(),expression:\"permission.types.toString() !== '2'\"}],attrs:{label:\"菜单图标\"}},[i(\"el-popover\",{attrs:{placement:\"bottom-start\",width:\"450\",trigger:\"click\"},on:{show:function(t){return e.$refs[\"iconSelect\"].reset()}}},[i(\"IconSelect\",{ref:\"iconSelect\",on:{selected:e.selected}}),e._v(\" \"),i(\"el-input\",{staticStyle:{width:\"450px\"},attrs:{slot:\"reference\",placeholder:\"点击选择图标\",clearable:\"\"},slot:\"reference\",model:{value:e.permission.icon,callback:function(t){e.$set(e.permission,\"icon\",t)},expression:\"permission.icon\"}},[e.permission.icon?i(\"svg-icon\",{staticClass:\"el-input__icon\",staticStyle:{height:\"32px\",width:\"16px\"},attrs:{slot:\"prefix\",\"icon-class\":e.permission.icon},slot:\"prefix\"}):i(\"i\",{staticClass:\"el-icon-search el-input__icon\",attrs:{slot:\"prefix\"},slot:\"prefix\"})],1)],1)],1),e._v(\" \"),i(\"el-form-item\",{directives:[{name:\"show\",rawName:\"v-show\",value:\"2\"!==e.permission.types.toString(),expression:\"permission.types.toString() !== '2'\"}],attrs:{label:\"外链\"}},[i(\"el-radio-group\",{attrs:{size:\"mini\"},model:{value:e.permission.i_frame,callback:function(t){e.$set(e.permission,\"i_frame\",t)},expression:\"permission.i_frame\"}},[i(\"el-radio-button\",{attrs:{label:\"1\"}},[e._v(\"是\")]),e._v(\" \"),i(\"el-radio-button\",{attrs:{label:\"0\"}},[e._v(\"否\")])],1)],1),e._v(\" \"),i(\"el-form-item\",{directives:[{name:\"show\",rawName:\"v-show\",value:\"2\"!==e.permission.types.toString(),expression:\"permission.types.toString() !== '2'\"}],attrs:{label:\"缓存\"}},[i(\"el-radio-group\",{attrs:{size:\"mini\"},model:{value:e.permission.cache,callback:function(t){e.$set(e.permission,\"cache\",t)},expression:\"permission.cache\"}},[i(\"el-radio-button\",{attrs:{label:\"1\"}},[e._v(\"是\")]),e._v(\" \"),i(\"el-radio-button\",{attrs:{label:\"0\"}},[e._v(\"否\")])],1)],1),e._v(\" \"),i(\"el-form-item\",{directives:[{name:\"show\",rawName:\"v-show\",value:\"2\"!==e.permission.types.toString(),expression:\"permission.types.toString() !== '2'\"}],attrs:{label:\"隱藏\"}},[i(\"el-radio-group\",{attrs:{size:\"mini\"},model:{value:e.permission.hidden,callback:function(t){e.$set(e.permission,\"hidden\",t)},expression:\"permission.hidden\"}},[i(\"el-radio-button\",{attrs:{label:\"1\"}},[e._v(\"是\")]),e._v(\" \"),i(\"el-radio-button\",{attrs:{label:\"0\"}},[e._v(\"否\")])],1)],1),e._v(\" \"),i(\"el-form-item\",{attrs:{label:\"权限名\"}},[i(\"el-input\",{attrs:{placeholder:\"权限名\"},model:{value:e.permission.name,callback:function(t){e.$set(e.permission,\"name\",t)},expression:\"permission.name\"}})],1),e._v(\" \"),i(\"el-form-item\",{attrs:{label:\"路由地址\"}},[i(\"el-input\",{staticStyle:{width:\"450px\"},attrs:{placeholder:\"路由地址\"},model:{value:e.permission.url,callback:function(t){e.$set(e.permission,\"url\",t)},expression:\"permission.url\"}})],1),e._v(\" \"),i(\"el-form-item\",{directives:[{name:\"show\",rawName:\"v-show\",value:0==e.permission.i_frame&&\"1\"===e.permission.types.toString(),expression:\"permission.i_frame == false && permission.types.toString() === '1'\"}],attrs:{label:\"组件名称\"}},[i(\"el-input\",{staticStyle:{width:\"178px\"},attrs:{placeholder:\"匹配组件内Name字段\"},model:{value:e.permission.component_name,callback:function(t){e.$set(e.permission,\"component_name\",t)},expression:\"permission.component_name\"}})],1),e._v(\" \"),i(\"el-form-item\",{attrs:{label:\"排序\"}},[i(\"el-input-number\",{staticStyle:{width:\"178px\"},attrs:{min:0,max:999,\"controls-position\":\"right\"},model:{value:e.permission.sorts,callback:function(t){e.$set(e.permission,\"sorts\",e._n(t))},expression:\"permission.sorts\"}})],1),e._v(\" \"),i(\"el-form-item\",{directives:[{name:\"show\",rawName:\"v-show\",value:0==e.permission.i_frame&&\"1\"===e.permission.types.toString(),expression:\"permission.i_frame == false && permission.types.toString() === '1'\"}],attrs:{label:\"组件路径\"}},[i(\"el-input\",{staticStyle:{width:\"450px\"},attrs:{placeholder:\"组件路径\"},model:{value:e.permission.component_path,callback:function(t){e.$set(e.permission,\"component_path\",t)},expression:\"permission.component_path\"}})],1),e._v(\" \"),i(\"el-form-item\",{attrs:{label:\"上级权限\"}},[i(\"treeselect\",{staticStyle:{width:\"450px\"},attrs:{options:e.permissions,normalizer:e.normalizer,placeholder:\"选择上级权限\"},model:{value:e.permission.parentId,callback:function(t){e.$set(e.permission,\"parentId\",t)},expression:\"permission.parentId\"}})],1)],1),e._v(\" \"),i(\"span\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[i(\"el-button\",{attrs:{type:\"danger\"},on:{click:function(t){e.dialogVisible=!1}}},[e._v(\"取消\")]),e._v(\" \"),i(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.confirmPermission}},[e._v(\"确定\")])],1)],1)],1)},n=[],r=(i(\"ac6a\"),i(\"7f7f\"),i(\"96cf\"),i(\"3b8d\")),o=i(\"ca17\"),a=i.n(o),l=(i(\"542c\"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"div\",{staticClass:\"icon-body\"},[i(\"el-input\",{staticStyle:{position:\"relative\"},attrs:{clearable:\"\",placeholder:\"请输入图标名称\"},on:{clear:e.filterIcons},nativeOn:{input:function(t){return e.filterIcons(t)}},model:{value:e.name,callback:function(t){e.name=t},expression:\"name\"}},[i(\"i\",{staticClass:\"el-icon-search el-input__icon\",attrs:{slot:\"suffix\"},slot:\"suffix\"})]),e._v(\" \"),i(\"div\",{staticClass:\"icon-list\"},e._l(e.iconList,(function(t,s){return i(\"div\",{key:s,on:{click:function(i){return e.selectedIcon(t)}}},[i(\"svg-icon\",{staticStyle:{height:\"30px\",width:\"16px\"},attrs:{\"icon-class\":t}}),e._v(\" \"),i(\"span\",[e._v(e._s(t))])],1)})),0)],1)}),c=[],p=(i(\"6762\"),i(\"2fdb\"),i(\"4917\"),i(\"51ff\")),m=function(e){return e.keys()},u=/\\.\\/(.*)\\.svg/,d=m(p).map((function(e){return e.match(u)[1]})),f=d,h={name:\"IconSelect\",data:function(){return{name:\"\",iconList:f}},methods:{filterIcons:function(){var e=this;this.name?this.iconList=this.iconList.filter((function(t){return t.includes(e.name)})):this.iconList=f},selectedIcon:function(e){this.$emit(\"selected\",e),document.body.click()},reset:function(){this.name=\"\",this.iconList=f}}},v=h,b=(i(\"2c7d\"),i(\"2877\")),g=Object(b[\"a\"])(v,l,c,!1,null,\"4f94f88f\",null),x=g.exports,_=i(\"4381\"),w=i(\"fe22\"),y=i(\"ed08\"),k={id:void 0,name:\"\",parentId:void 0,parentName:\"\",url:\"\",types:0,sorts:void 0,component_name:\"\",component_path:\"\",icon:\"\",cache:0,hidden:0,i_frame:0},S={name:\"Permission\",components:{Treeselect:a.a,IconSelect:x},directives:{permission:_[\"a\"]},data:function(){return{defaultProps:{children:\"childrens\",label:\"name\"},permission:Object.assign({},k),permissions:[],dialogVisible:!1,dialogType:\"new\",filterText:\"\",rules:{types:[{required:!0,message:\"请选择权限类型\",trigger:\"change\"}],name:[{required:!0,message:\"请输入权限名\",trigger:\"blur\"},{min:2,max:20,message:\"长度在 2 到 20 个字符\",trigger:\"blur\"}],url:[{required:!0,message:\"请输入路由地址\",trigger:\"blur\"}],parentId:[{required:!0,message:\"请选择上级权限\",trigger:\"change\"}]}}},watch:{filterText:function(e){this.$refs.tree.filter(e)}},created:function(){this.getPermissions()},methods:{getPermissions:function(){var e=Object(r[\"a\"])(regeneratorRuntime.mark((function e(){var t,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(w[\"c\"])();case 2:t=e.sent,i=t.result,this.diGuiTree(i),this.permissions=[{id:0,name:\"权限树\",childrens:i}];case 6:case\"end\":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),filterNode:function(e,t){return!e||-1!==t.name.indexOf(e)},diGuiTree:function(e){var t=this;e.forEach((function(e){\"\"===e.childrens||void 0===e.childrens||null===e.childrens?delete e.childrens:t.diGuiTree(e.childrens)}))},normalizer:function(e){return{id:e.id,label:e.name,children:e.childrens}},selected:function(e){this.permission.icon=e},handleCreate:function(e){this.dialogType=\"new\",this.dialogVisible=!0,this.permission=Object.assign({},k),null!=e&&(this.permission.parentId=e.id,this.permission.parentName=e.name)},handleEdit:function(){var e=Object(r[\"a\"])(regeneratorRuntime.mark((function e(t,i){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.dialogType=\"edit\",this.dialogVisible=!0,this.permission=Object(y[\"c\"])(i),s=t.parent.data,this.permission.parentId=s.id,this.permission.parentName=s.name;case 6:case\"end\":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}(),confirmPermission:function(){var e=Object(r[\"a\"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=\"edit\"===this.dialogType,!t){e.next=6;break}return e.next=4,Object(w[\"f\"])(this.permission);case 4:e.next=8;break;case 6:return e.next=8,Object(w[\"a\"])(this.permission);case 8:this.dialogVisible=!1,this.$message({showClose:!0,message:\"保存成功\",type:\"success\"}),this.getPermissions();case 11:case\"end\":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleDelete:function(e){var t=this;this.$confirm(\"确认删除?\",\"警告\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(Object(r[\"a\"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,Object(w[\"b\"])(e.id);case 2:t.$message({showClose:!0,message:\"删除成功\",type:\"success\"}),t.getPermissions();case 4:case\"end\":return i.stop()}}),i)})))).catch((function(e){console.error(e)}))}}},O=S,j=(i(\"2f88\"),Object(b[\"a\"])(O,s,n,!1,null,null,null));t[\"default\"]=j.exports},d97c:function(e,t,i){},fe22:function(e,t,i){\"use strict\";i.d(t,\"c\",(function(){return n})),i.d(t,\"e\",(function(){return r})),i.d(t,\"d\",(function(){return o})),i.d(t,\"a\",(function(){return a})),i.d(t,\"f\",(function(){return l})),i.d(t,\"b\",(function(){return c}));var s=i(\"b775\");function n(){return Object(s[\"a\"])({url:\"/rest/permission/all\",method:\"get\"})}function r(){return Object(s[\"a\"])({url:\"/rest/permission/subPermission\",method:\"get\"})}function o(e){return Object(s[\"a\"])({url:\"/rest/permission/allByRole/\".concat(e),method:\"get\"})}function a(e){return Object(s[\"a\"])({url:\"/rest/permission/add\",method:\"post\",data:e})}function l(e){return Object(s[\"a\"])({url:\"/rest/permission/update\",method:\"post\",data:e})}function c(e){return Object(s[\"a\"])({url:\"/rest/permission/delete\",method:\"get\",params:{id:e}})}}}]);","extractedComments":[]}
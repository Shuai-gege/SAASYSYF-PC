{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-e08bf25a\"],{\"09f4\":function(e,t,a){\"use strict\";a.d(t,\"a\",(function(){return l})),Math.easeInOutQuad=function(e,t,a,r){return e/=r/2,e<1?a/2*e*e+t:(e--,-a/2*(e*(e-2)-1)+t)};var r=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function i(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function n(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function l(e,t,a){var l=n(),s=e-l,o=20,c=0;t=\"undefined\"===typeof t?500:t;var u=function e(){c+=o;var n=Math.easeInOutQuad(c,l,s,t);i(n),c<t?r(e):a&&\"function\"===typeof a&&a()};u()}},4381:function(e,t,a){\"use strict\";a(\"ac4d\"),a(\"8a81\"),a(\"ac6a\");var r=a(\"4360\"),i={inserted:function(e,t,a){var i=t.value,n=r[\"a\"].getters&&r[\"a\"].getters.permissions;if(!(i&&i instanceof Array&&i.length>0&&n))throw new Error(\"need permissions! Like v-permission=\\\"['/rest/user/list']\\\"\");var l=!1,s=!0,o=!1,c=void 0;try{for(var u,d=n[Symbol.iterator]();!(s=(u=d.next()).done);s=!0){var m=u.value;if(m.url===i[0]){l=!0;break}}}catch(p){o=!0,c=p}finally{try{s||null==d.return||d.return()}finally{if(o)throw c}}l||e.remove()}},n=function(e){e.directive(\"permission\",i)};window.Vue&&(window[\"permission\"]=i,Vue.use(n)),i.install=n;t[\"a\"]=i},\"5adf\":function(e,t,a){\"use strict\";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"app-container\"},[a(\"div\",{staticStyle:{\"margin-top\":\"20px\",\"margin-bottom\":\"20px\"}},[a(\"el-row\",{attrs:{gutter:20}},[a(\"el-col\",{attrs:{span:8}},[a(\"el-date-picker\",{attrs:{type:\"datetimerange\",align:\"right\",\"start-placeholder\":\"开始日期\",\"end-placeholder\":\"结束日期\",\"default-time\":[\"00:00:00\",\"23:59:59\"]},model:{value:e.listQuery.chackTime,callback:function(t){e.$set(e.listQuery,\"chackTime\",t)},expression:\"listQuery.chackTime\"}})],1),e._v(\" \"),a(\"el-col\",{attrs:{span:4}},[a(\"el-select\",{attrs:{placeholder:\"分配人\",clearable:\"\"},model:{value:e.listQuery.assignerId,callback:function(t){e.$set(e.listQuery,\"assignerId\",t)},expression:\"listQuery.assignerId\"}},e._l(e.assignerList,(function(e){return a(\"el-option\",{key:e.id,attrs:{label:e.locationName,value:e.id}})})),1)],1),e._v(\" \"),a(\"el-col\",{attrs:{span:4}},[a(\"el-select\",{attrs:{placeholder:\"任务状态\",clearable:\"\"},model:{value:e.listQuery.checkStatus,callback:function(t){e.$set(e.listQuery,\"checkStatus\",t)},expression:\"listQuery.checkStatus\"}},e._l(e.checkStatusList,(function(e){return a(\"el-option\",{key:e.id,attrs:{label:e.title,value:e.id}})})),1)],1),e._v(\" \"),a(\"el-col\",{attrs:{span:8}},[a(\"el-button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"/rest/deviceInfo/list\"],expression:\"['/rest/deviceInfo/list']\"}],staticClass:\"filter-item\",attrs:{type:\"primary\",icon:\"el-icon-search\"},on:{click:e.handleSearch}},[e._v(\"查找\")]),e._v(\" \"),a(\"el-button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"/rest/deviceInfo/exportQR\"],expression:\"['/rest/deviceInfo/exportQR']\"}],staticClass:\"filter-item\",staticStyle:{\"margin-left\":\"10px\"},attrs:{type:\"primary\"},on:{click:e.handleCreate}},[e._v(\"导出\")])],1)],1)],1),e._v(\" \"),a(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.listLoading,expression:\"listLoading\"}],key:e.tableKey,staticStyle:{width:\"100%\"},attrs:{data:e.list,border:\"\",height:\"450\"}},[a(\"el-table-column\",{attrs:{width:\"50\",label:\"序号\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"span\",[e._v(e._s(t.$index+(e.listQuery.page-1)*e.listQuery.limit+1))])]}}])}),e._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"checkTime\",label:\"点检任务时间\",formatter:e.formatCheckTime}}),e._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"assignerName\",label:\"分配人\"}}),e._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"examinerName\",label:\"点检人\"}}),e._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"checkStatus\",label:\"任务状态\",formatter:e.formatCheckStatus}}),e._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"unusualDeviceNum\",label:\"异常设备数量\"}}),e._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"grade\",label:\"任务评分\"}}),e._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"deviceNum\",label:\"任务\",formatter:e.formatDeviceNum}}),e._v(\" \"),a(\"el-table-column\",{attrs:{label:\"操作\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-button\",{attrs:{type:\"text\",size:\"small\"},on:{click:function(a){return e.infoDetail(t)}}},[e._v(\"详情\")])]}}])})],1),e._v(\" \"),a(\"pagination\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.total>0,expression:\"total>0\"}],attrs:{total:e.total,page:e.listQuery.page,limit:e.listQuery.limit},on:{\"update:page\":function(t){return e.$set(e.listQuery,\"page\",t)},\"update:limit\":function(t){return e.$set(e.listQuery,\"limit\",t)},pagination:e.getList}}),e._v(\" \"),a(\"el-dialog\",{attrs:{visible:e.dialogVisible,title:\"详情\"},on:{\"update:visible\":function(t){e.dialogVisible=t}}},[a(\"el-tag\",{attrs:{type:\"warning\"}},[e._v(\"未点检设备\")]),e._v(\" \"),a(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.listLoading,expression:\"listLoading\"}],key:e.unCheckTableKey,staticStyle:{width:\"100%\"},attrs:{data:e.unCheckList,border:\"\"}},[a(\"el-table-column\",{attrs:{width:\"50\",label:\"序号\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"span\",[e._v(e._s(t.$index+(e.listQuery.page-1)*e.listQuery.limit+1))])]}}])}),e._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"deviceName\",label:\"设备名\"}}),e._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"brandName\",label:\"设备类型\"}}),e._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"deviceModel\",label:\"设备位置\",formatter:e.formatAddress}}),e._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"checkTime1\",label:\"点检时间\"}}),e._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"deviceStatus1\",label:\"设备状态\",formatter:e.formatDeviceStatus}}),e._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"checkRemark1\",label:\"点检描述\"}}),e._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"checkImgUrl1\",label:\"点检照片\"}})],1),e._v(\" \"),a(\"el-tag\",[e._v(\"已点检设备\")]),e._v(\" \"),a(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.listLoading,expression:\"listLoading\"}],key:e.checkTableKey,staticStyle:{width:\"100%\"},attrs:{data:e.checkList,border:\"\"}},[a(\"el-table-column\",{attrs:{width:\"50\",label:\"序号\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"span\",[e._v(e._s(t.$index+(e.listQuery.page-1)*e.listQuery.limit+1))])]}}])}),e._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"deviceName\",label:\"设备名\"}}),e._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"brandName\",label:\"设备类型\"}}),e._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"deviceModel\",label:\"设备位置\",formatter:e.formatAddress}}),e._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"checkTime\",label:\"点检时间\"}}),e._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"deviceStatus\",label:\"设备状态\",formatter:e.formatDeviceStatus}}),e._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"checkRemark\",label:\"点检描述\"}}),e._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"checkImgUrl\",label:\"点检照片\"},scopedSlots:e._u([{key:\"default\",fn:function(e){return[a(\"el-image\",{staticStyle:{width:\"100px\",height:\"100px\"},attrs:{src:e.row.checkImgUrl,\"preview-src-list\":[e.row.checkImgUrl]}})]}}])})],1)],1)],1)},i=[],n=(a(\"96cf\"),a(\"3b8d\")),l=a(\"4381\"),s=a(\"7be3\"),o=a(\"333d\"),c=(a(\"ed08\"),{name:\"DeviceCheckInfo\",components:{Pagination:o[\"a\"]},directives:{permission:l[\"a\"]},data:function(){return{tableKey:0,unCheckTableKey:1,checkTableKey:2,list:null,unCheckList:null,checkList:null,total:0,assignerList:null,checkStatusList:[{id:\"0\",title:\"未完成\"},{id:\"1\",title:\"已完成\"}],listLoading:!1,listQuery:{page:1,limit:10,name:\"\",checkTime:void 0},dialogVisible:!1}},created:function(){this.getList()},methods:{getList:function(){var e=Object(n[\"a\"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.listLoading=!0,e.prev=1,e.next=4,Object(s[\"d\"])(this.listQuery);case 4:t=e.sent,this.listLoading=!1,this.list=t.result.rows,this.total=t.result.records,e.next=13;break;case 10:e.prev=10,e.t0=e[\"catch\"](1),this.listLoading=!1;case 13:case\"end\":return e.stop()}}),e,this,[[1,10]])})));function t(){return e.apply(this,arguments)}return t}(),formatCheckTime:function(e,t){return e.startTime+\"-\"+e.endTime},formatCheckStatus:function(e,t){return 1===e.checkStatus?\"已完成\":\"未完成\"},formatDeviceNum:function(e,t){return e.normalDeviceNum+\"/\"+e.deviceNum},formatAddress:function(e,t){return e.buildingName+\"-\"+e.floorName},formatDeviceStatus:function(e,t){return 1===e.deviceStatus?\"正常\":\"异常\"},infoDetail:function(){var e=Object(n[\"a\"])(regeneratorRuntime.mark((function e(t){var a,r,i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.dialogVisible=!0,this.listLoading=!0,e.prev=2,a={deviceCheckId:t.row.id,checkStatus:\"0\"},e.next=6,Object(s[\"c\"])(a);case 6:return r=e.sent,this.listLoading=!1,this.unCheckList=r.result.rows,i={deviceCheckId:t.row.id,checkStatus:\"1\"},e.next=12,Object(s[\"c\"])(i);case 12:n=e.sent,this.listLoading=!1,this.checkList=n.result.rows,e.next=20;break;case 17:e.prev=17,e.t0=e[\"catch\"](2),this.listLoading=!1;case 20:case\"end\":return e.stop()}}),e,this,[[2,17]])})));function t(t){return e.apply(this,arguments)}return t}(),handleSearch:function(){this.getList()}}}),u=c,d=a(\"2877\"),m=Object(d[\"a\"])(u,r,i,!1,null,null,null);t[\"default\"]=m.exports},\"7be3\":function(e,t,a){\"use strict\";a.d(t,\"e\",(function(){return i})),a.d(t,\"f\",(function(){return n})),a.d(t,\"a\",(function(){return l})),a.d(t,\"g\",(function(){return s})),a.d(t,\"b\",(function(){return o})),a.d(t,\"d\",(function(){return c})),a.d(t,\"c\",(function(){return u}));var r=a(\"b775\");function i(e){return Object(r[\"a\"])({url:\"/rest/deviceInfo/list\",method:\"post\",data:e})}function n(e){return Object(r[\"a\"])({url:\"/rest/deviceInfo/exportQR\",method:\"post\",data:e})}function l(e){return Object(r[\"a\"])({url:\"/rest/deviceInfo/add\",method:\"post\",data:e})}function s(e){return Object(r[\"a\"])({url:\"/rest/deviceInfo/update\",method:\"post\",data:e})}function o(e){return Object(r[\"a\"])({url:\"/rest/deviceInfo/delete\",method:\"get\",params:{id:e}})}function c(e){return Object(r[\"a\"])({url:\"/rest/deviceCheck/list\",method:\"post\",data:e})}function u(e){return Object(r[\"a\"])({url:\"/rest/deviceCheckDetail/list\",method:\"post\",data:e})}}}]);","extractedComments":[]}
{"remainingRequest":"D:\\workspace\\selfcompanyworkspace\\vue-link-admin\\node_modules\\thread-loader\\dist\\cjs.js!D:\\workspace\\selfcompanyworkspace\\vue-link-admin\\node_modules\\babel-loader\\lib\\index.js!D:\\workspace\\selfcompanyworkspace\\vue-link-admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\workspace\\selfcompanyworkspace\\vue-link-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\workspace\\selfcompanyworkspace\\vue-link-admin\\src\\views\\kejenkj\\upload\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\workspace\\selfcompanyworkspace\\vue-link-admin\\src\\views\\kejenkj\\upload\\index.vue","mtime":1579485715588},{"path":"D:\\workspace\\selfcompanyworkspace\\vue-link-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\workspace\\selfcompanyworkspace\\vue-link-admin\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\workspace\\selfcompanyworkspace\\vue-link-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\workspace\\selfcompanyworkspace\\vue-link-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\workspace\\selfcompanyworkspace\\vue-link-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"D:\\\\workspace\\\\selfcompanyworkspace\\\\vue-link-admin\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getToken } from '@/utils/auth';\nimport { uploadList, editUpload } from '@/api/kejenkj/upload';\nimport Pagination from '@/components/Pagination'; // Secondary package based on el-pagination\n\nimport { formatTimeToStr } from '@/utils/dateUtil';\nimport { deepClone } from '@/utils';\nvar token = getToken();\nvar uploadVO = {\n  nickName: '',\n  id: '',\n  uid: '',\n  title: '',\n  description: '',\n  cloudUrl: '',\n  cloudCode: '',\n  fileName: '',\n  fileUrl: '',\n  predictScore: '',\n  createTime: '',\n  examineFlag: '',\n  examineTime: '',\n  actualScore: '',\n  uploadType: '',\n  redeemNos: '',\n  postFix: '',\n  remark: ''\n};\nexport default {\n  name: \"Upload\",\n  components: {\n    Pagination: Pagination\n  },\n  data: function data() {\n    return {\n      list: null,\n      total: 0,\n      tableKey: 0,\n      listLoading: false,\n      listQuery: {\n        page: 1,\n        limit: 10,\n        title: '',\n        // 资料名称\n        description: '',\n        // 资料描述\n        createTime: '',\n        // 上传时间\n        nickName: '',\n        // 上传人\n        examineFlag: '',\n        // 审核标记\n        uploadType: [{\n          value: '0',\n          label: '上架'\n        }, {\n          value: '1',\n          label: '赎回'\n        }]\n      },\n      headersObj: {\n        'LinkAdmin-Token': token\n      },\n      activeName: 'first',\n      dialogVisible: false,\n      dialogType: 'new',\n      uploadVO: Object.assign({}, uploadVO),\n      rules: {\n        examineFlag: [{\n          required: true,\n          message: '请选择审核状态',\n          trigger: 'change'\n        }]\n      }\n    };\n  },\n  watch: {\n    searchDeptName: function searchDeptName(val) {\n      this.$refs.serchDeptTree.filter(val);\n    }\n  },\n  created: function created() {\n    this.getList();\n  },\n  methods: {\n    getList: function () {\n      var _getList = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var res;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                this.listLoading = true; // If the Promise is rejected, the rejected value is thrown.\n\n                _context.prev = 1;\n                _context.next = 4;\n                return uploadList(this.listQuery);\n\n              case 4:\n                res = _context.sent;\n                this.listLoading = false;\n                this.list = res.result.rows;\n                this.total = res.result.records;\n                _context.next = 13;\n                break;\n\n              case 10:\n                _context.prev = 10;\n                _context.t0 = _context[\"catch\"](1);\n                this.listLoading = false;\n\n              case 13:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[1, 10]]);\n      }));\n\n      function getList() {\n        return _getList.apply(this, arguments);\n      }\n\n      return getList;\n    }(),\n    // 查询\n    handleSearch: function handleSearch() {\n      this.getList();\n    },\n    formatDateTime: function formatDateTime(row, column) {\n      return formatTimeToStr(row.createTime, 'yyyy-MM-dd hh:mm:ss');\n    },\n    formatDateTimeTemp: function formatDateTimeTemp(tt) {\n      return formatTimeToStr(tt, 'yyyy-MM-dd hh:mm:ss');\n    },\n    // 审核标记转换\n    shenhebj: function shenhebj(row, column) {\n      var tt = row.examineFlag;\n\n      if (tt == '0') {\n        return '未审核';\n      }\n\n      if (tt == '1') {\n        return '审核通过';\n      }\n\n      if (tt == '2') {\n        return '审核未通过';\n      }\n    },\n    // 上传类型转换\n    uploadType: function uploadType(row, column) {\n      var tt = row.uploadType;\n\n      if (tt == '0') {\n        return '上架';\n      }\n\n      if (tt == '1') {\n        return '赎回';\n      }\n    },\n    // 点击编辑按钮触发\n    handleEdit: function handleEdit(scope) {\n      debugger;\n      this.dialogVisible = true;\n      this.uploadVO = deepClone(scope.row);\n      var tt = this.uploadVO.createTime;\n      this.uploadVO.createTime = this.formatDateTimeTemp(tt);\n    },\n    // 编辑功能结束，点击确定按钮触发\n    confirmUpload: function () {\n      var _confirmUpload = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2() {\n        var examineFlag, remark, res, result;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                examineFlag = this.uploadVO.examineFlag;\n                remark = this.uploadVO.remark;\n\n                if (!(examineFlag == 2 && (remark == null || remark == undefined || remark.trim() == ''))) {\n                  _context2.next = 5;\n                  break;\n                }\n\n                this.$message({\n                  showClose: true,\n                  message: '审核未通过,必须备注原因哦~',\n                  type: 'error'\n                });\n                return _context2.abrupt(\"return\");\n\n              case 5:\n                this.uploadVO.createTime = this.formatDateTimeTemp(this.uploadVO.createTime);\n                this.uploadVO.examineTime = this.formatDateTimeTemp(this.uploadVO.examineTime);\n                _context2.next = 9;\n                return editUpload(this.uploadVO);\n\n              case 9:\n                res = _context2.sent;\n                result = res.result;\n\n                if (result) {\n                  this.$message({\n                    showClose: true,\n                    message: '编辑成功',\n                    type: 'success'\n                  });\n                  this.dialogVisible = false;\n                  this.getList();\n                }\n\n              case 12:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function confirmUpload() {\n        return _confirmUpload.apply(this, arguments);\n      }\n\n      return confirmUpload;\n    }()\n  }\n};",null]}